{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { bookinfo } from './bookinfo.validator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"./book-list.service\";\nimport * as i3 from \"@angular/common\";\nfunction BookListComponent_input_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 28);\n    i0.ɵɵlistener(\"click\", function BookListComponent_input_36_Template_input_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.addBook());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.bookForm.invalid);\n  }\n}\nfunction BookListComponent_input_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 29);\n    i0.ɵɵlistener(\"click\", function BookListComponent_input_37_Template_input_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.updateBook());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.bookForm.invalid);\n  }\n}\nfunction BookListComponent_p_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.bookError);\n  }\n}\nfunction BookListComponent_tr_58_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 31)(1, \"td\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function BookListComponent_tr_58_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const book_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.editBook(book_r8));\n    });\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function BookListComponent_tr_58_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const book_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.deleteBook(book_r8.id));\n    });\n    i0.ɵɵtext(17, \"Remove\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r8 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"bookID-\", ctx_r3.index, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(book_r8.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.series);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.author);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.illustrator);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.genre);\n  }\n}\nexport class BookListComponent {\n  constructor(formBuilder, bookListService) {\n    this.formBuilder = formBuilder;\n    this.bookListService = bookListService;\n    this.bookError = \"The Title and/or Author field is faulty. Please try again.\";\n    this.errorMessage = \"\";\n    this.sub = new Subscription();\n    this.books = [];\n    this.isError = false;\n  }\n  ngOnInit() {\n    this.bookForm = this.formBuilder.group({\n      id: [],\n      title: ['', [Validators.required, Validators.minLength(1)]],\n      series: [],\n      author: ['', [Validators.required, Validators.minLength(1)]],\n      illustrator: [],\n      genre: []\n    }, {\n      validators: bookinfo\n    });\n    this.sub = this.bookListService.getBooks().subscribe({\n      next: books => this.books = books\n    });\n  }\n  addBook() {\n    console.log(this.bookForm.value);\n    this.bookListService.addBook(this.bookForm.value).subscribe({\n      next: () => this.reloadPage(),\n      error: err => this.errorMessage = err\n    });\n    this.reset();\n  }\n  editBook(book) {\n    this.bookForm.setValue({\n      id: book.id,\n      title: book.title,\n      series: book.series,\n      author: book.author,\n      illustrator: book.illustrator,\n      genre: book.genre\n    });\n  }\n  updateBook() {\n    console.log(this.bookForm.value);\n    this.bookListService.addBook(this.bookForm.value).subscribe({\n      next: () => this.reloadPage(),\n      error: err => this.errorMessage = err\n    });\n  }\n  deleteBook(id) {\n    if (confirm('Are you sure you want to delete?')) {\n      this.bookListService.deleteBook(id).subscribe({\n        next: () => this.reloadPage(),\n        error: err => this.errorMessage = err\n      });\n    }\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n  reset() {\n    this.bookForm.reset();\n  }\n}\nBookListComponent.ɵfac = function BookListComponent_Factory(t) {\n  return new (t || BookListComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.BookListService));\n};\nBookListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BookListComponent,\n  selectors: [[\"ba-book-list\"]],\n  decls: 59,\n  vars: 5,\n  consts: [[\"ng-app\", \"myApp\", \"ng-controller\", \"listController as ctrl\"], [1, \"belch\"], [\"name\", \"bookListTitle\"], [3, \"formGroup\", \"ngSubmit\"], [\"name\", \"titleLabel\"], [\"type\", \"text\", \"name\", \"titleInput\", \"formControlName\", \"title\", \"required\", \"required\"], [\"name\", \"seriesLabel\"], [\"type\", \"text\", \"name\", \"seriesInput\", \"formControlName\", \"series\"], [\"name\", \"authorLabel\"], [\"type\", \"text\", \"name\", \"authorInput\", \"formControlName\", \"author\", \"required\", \"required\"], [\"name\", \"illustratorLabel\"], [\"type\", \"text\", \"name\", \"illustratorInput\", \"formControlName\", \"illustrator\"], [\"name\", \"genreLabel\"], [\"type\", \"text\", \"name\", \"genreInput\", \"formControlName\", \"genre\"], [3, \"click\"], [\"name\", \"submitBookBtn\", \"type\", \"submit\", \"value\", \"Submit new book\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"submit\", \"value\", \"Update book\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"style\", \"color: red\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"mb-0\"], [\"name\", \"columnId\"], [\"name\", \"columnTitle\"], [\"name\", \"columnSeries\"], [\"name\", \"columnAuthor\"], [\"name\", \"columnIllustrator\"], [\"name\", \"columnGenre\"], [\"id\", \"bookList\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"submitBookBtn\", \"type\", \"submit\", \"value\", \"Submit new book\", 3, \"disabled\", \"click\"], [\"type\", \"submit\", \"value\", \"Update book\", 3, \"disabled\", \"click\"], [2, \"color\", \"red\"], [\"id\", \"bookList\"], [3, \"name\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"custom-width\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"custom-width\", 3, \"click\"]],\n  template: function BookListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"head\")(1, \"title\");\n      i0.ɵɵtext(2, \"Book Archive\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"div\", 0)(4, \"div\", 1)(5, \"h2\", 2);\n      i0.ɵɵtext(6, \"List of Favorite Books\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"BR\");\n      i0.ɵɵelementStart(8, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function BookListComponent_Template_form_ngSubmit_8_listener() {\n        return ctx.addBook;\n      });\n      i0.ɵɵelement(9, \"br\")(10, \"br\");\n      i0.ɵɵelementStart(11, \"label\", 4);\n      i0.ɵɵtext(12, \"Title: \");\n      i0.ɵɵelement(13, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"br\");\n      i0.ɵɵelementStart(15, \"label\", 6);\n      i0.ɵɵtext(16, \"Series: \");\n      i0.ɵɵelement(17, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"br\");\n      i0.ɵɵelementStart(19, \"label\", 8);\n      i0.ɵɵtext(20, \"Author: \");\n      i0.ɵɵelement(21, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"br\");\n      i0.ɵɵelementStart(23, \"label\", 10);\n      i0.ɵɵtext(24, \"Illustrator: \");\n      i0.ɵɵelement(25, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"br\");\n      i0.ɵɵelementStart(27, \"label\", 12);\n      i0.ɵɵtext(28, \"Genre: \");\n      i0.ɵɵelement(29, \"input\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"br\")(31, \"br\");\n      i0.ɵɵelementStart(32, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function BookListComponent_Template_button_click_32_listener() {\n        return ctx.reset();\n      });\n      i0.ɵɵtext(33, \"Clear\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"br\")(35, \"br\");\n      i0.ɵɵtemplate(36, BookListComponent_input_36_Template, 1, 1, \"input\", 15);\n      i0.ɵɵtemplate(37, BookListComponent_input_37_Template, 1, 1, \"input\", 16);\n      i0.ɵɵtemplate(38, BookListComponent_p_38_Template, 2, 1, \"p\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(39, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"div\", 18)(41, \"div\", 19)(42, \"table\", 20)(43, \"thead\")(44, \"tr\")(45, \"th\", 21);\n      i0.ɵɵtext(46, \"Book Id\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"th\", 22);\n      i0.ɵɵtext(48, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\", 23);\n      i0.ɵɵtext(50, \"Series\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"th\", 24);\n      i0.ɵɵtext(52, \"Author\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(53, \"th\", 25);\n      i0.ɵɵtext(54, \"Illustrator\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(55, \"th\", 26);\n      i0.ɵɵtext(56, \"Genre\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(57, \"tbody\");\n      i0.ɵɵtemplate(58, BookListComponent_tr_58_Template, 18, 7, \"tr\", 27);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.bookForm);\n      i0.ɵɵadvance(28);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.bookForm.get(\"id\")) == null ? null : tmp_1_0.value) === null);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.bookForm.get(\"id\")) == null ? null : tmp_2_0.value);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isError);\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"ngForOf\", ctx.books);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\".card[_ngcontent-%COMP%] {\\r\\n    width: 70;\\r\\n    margin: 0 auto;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYm9vay1saXN0L2Jvb2stbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUE7SUFDSSxTQUFTO0lBQ1QsY0FBYztBQUNsQiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuLmNhcmQge1xyXG4gICAgd2lkdGg6IDcwO1xyXG4gICAgbWFyZ2luOiAwIGF1dG87XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","Subscription","bookinfo","i0","BookListComponent","constructor","formBuilder","bookListService","ngOnInit","bookForm","group","id","title","required","minLength","series","author","illustrator","genre","validators","sub","getBooks","subscribe","next","books","addBook","console","log","value","reloadPage","error","err","errorMessage","reset","editBook","book","setValue","updateBook","deleteBook","confirm","window","location","reload","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\matthew.earlywine\\git\\book-archive\\webapp-NG\\book-archive-ng\\src\\app\\book-list\\book-list.component.ts","C:\\Users\\matthew.earlywine\\git\\book-archive\\webapp-NG\\book-archive-ng\\src\\app\\book-list\\book-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { Book } from './book';\r\nimport { BookListService } from './book-list.service';\r\nimport { bookinfo } from './bookinfo.validator';\r\n\r\n@Component({\r\n  selector: 'ba-book-list',\r\n  templateUrl: './book-list.component.html',\r\n  styleUrls: ['./book-list.component.css']\r\n})\r\nexport class BookListComponent implements OnInit{\r\n  bookError: string = \"The Title and/or Author field is faulty. Please try again.\";\r\n\r\n  bookForm!: FormGroup;\r\n  index: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private bookListService: BookListService) {}\r\n\r\n  errorMessage: string = \"\";\r\n  sub: Subscription = new Subscription;\r\n  books: Book[] = [];\r\n\r\n  isError: boolean = false;\r\n\r\n  ngOnInit(): void {\r\n      this.bookForm = this.formBuilder.group({\r\n      id: [],\r\n      title: ['', [Validators.required, Validators.minLength(1)]],\r\n      series: [],\r\n      author: ['', [Validators.required, Validators.minLength(1)]],\r\n      illustrator: [],\r\n      genre: []\r\n    },\r\n    {\r\n      validators: bookinfo\r\n    })\r\n\r\n   this.sub = this.bookListService.getBooks().subscribe({\r\n      next: (books: Book[]) => this.books = books\r\n    });\r\n\r\n  }\r\n\r\n  addBook(): void{\r\n    console.log(this.bookForm.value);\r\n    this.bookListService.addBook(this.bookForm.value).subscribe({\r\n      next: () => this.reloadPage(),\r\n      error: err => this.errorMessage = err\r\n    });\r\n    this.reset();\r\n  }\r\n\r\n  editBook(book: Book): void{\r\n    this.bookForm.setValue({\r\n      id: book.id, \r\n      title: book.title, \r\n      series: book.series, \r\n      author: book.author, \r\n      illustrator: book.illustrator, \r\n      genre: book.genre}) \r\n  }\r\n\r\n  updateBook(): void{\r\n        console.log(this.bookForm.value);\r\n    this.bookListService.addBook(this.bookForm.value).subscribe({\r\n      next: () => this.reloadPage(),\r\n      error: err => this.errorMessage = err\r\n\r\n    });\r\n  }\r\n\r\n  deleteBook(id: number): void {\r\n    if(confirm('Are you sure you want to delete?')){\r\n      this.bookListService.deleteBook(id).subscribe({\r\n        next: () => this.reloadPage(),\r\n        error: err => this.errorMessage = err\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  reloadPage() {\r\n    window.location.reload();\r\n }\r\n\r\n reset(){\r\n  this.bookForm.reset();\r\n }\r\n\r\n}\r\n\r\n\r\n\r\n","<head>\r\n\t<title>Book Archive</title>\r\n</head>\r\n\r\n<div ng-app=\"myApp\" ng-controller=\"listController as ctrl\">\r\n\r\n<div  class=\"belch\">\r\n\t\r\n\t<h2 name=\"bookListTitle\">List of Favorite Books</h2><BR>\r\n    <form [formGroup]=\"bookForm\" \r\n    (ngSubmit)=\"(addBook)\">\r\n    <br><br><label name=\"titleLabel\">Title:  <input type=\"text\" name=\"titleInput\" formControlName=\"title\" required=\"required\"/></label><br>\r\n    \t<label name=\"seriesLabel\">Series:  <input type=\"text\" name=\"seriesInput\" formControlName=\"series\"/></label><br>\r\n        <label name=\"authorLabel\">Author:  <input type=\"text\" name=\"authorInput\" formControlName=\"author\" required=\"required\"/></label><br>\r\n        <label name=\"illustratorLabel\">Illustrator:  <input  type=\"text\" name=\"illustratorInput\" formControlName=\"illustrator\" /></label><br>\r\n        <label name=\"genreLabel\">Genre:  <input  type=\"text\" name=\"genreInput\" formControlName=\"genre\" /></label><br>\r\n        \r\n        <br>\r\n        <button (click)=\"reset()\">Clear</button><br>\r\n        <br><input *ngIf=\"bookForm.get('id')?.value === null\" name=\"submitBookBtn\" [disabled]=\"bookForm.invalid\" type=\"submit\" (click)='addBook()' value=\"Submit new book\" />\r\n\t\t<input *ngIf=\"bookForm.get('id')?.value\"  type=\"submit\" [disabled]=\"bookForm.invalid\"  (click)='updateBook()' value=\"Update book\" />\r\n\r\n        \r\n        <p *ngIf=\"isError\" style=\"color: red\">{{bookError}}</p>\r\n    </form><br>\r\n</div>\r\n<div class=\"card-body\">\r\n    <div class=\"table-responsive\">\r\n\t    <table class=\"table mb-0\" >\r\n\t        <thead>\r\n\t\t        <tr>\r\n                    <th name=\"columnId\">Book Id</th>\r\n                    <th name=\"columnTitle\">Title</th>\r\n                    <th name=\"columnSeries\">Series</th>\r\n                    <th name=\"columnAuthor\">Author</th>\r\n                    <th name=\"columnIllustrator\">Illustrator</th>\r\n                    <th name=\"columnGenre\">Genre</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                        <tr *ngFor=\"let book of books\" id=\"bookList\">\r\n                            <td name=\"bookID-{{index}}\">{{book.id}}</td>\r\n                            <td>{{book.title}}</td>\r\n                            <td>{{book.series}}</td>\r\n                            <td>{{book.author}}</td>\r\n                            <td>{{book.illustrator}}</td>\r\n                            <td>{{book.genre}}</td>\r\n                            <td>\r\n                                <button type=\"button\" (click)='editBook(book)' class=\"btn btn-success custom-width\">Edit</button>\r\n                                <button type=\"button\" (click)=\"deleteBook(book.id)\" class=\"btn btn-danger custom-width\">Remove</button>\r\n                            </td>\r\n                        </tr>\r\n                    \t\t\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}